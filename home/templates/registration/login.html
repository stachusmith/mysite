

{% extends "base_menu.html" %}
{% load crispy_forms_tags %}
{% load static %}

{% block content %}

<h2>Welcome to Stachu Smith's</h2><h1>ProjectView App</h1>
<div class="upper">
  <div class="left">
    Please enter your username and password:
    {% if form.errors %}
      <p>Your username and password didn't match. Please try again.</p>
    {% endif %}
    <link rel="stylesheet" type="text/css" href="{% static 'project_view/login.css' %}">
    <script type="text/javascript" src="{% static 'project_view/project_view.js' %}"></script>

    <div class="login_area">
      <form method="post" action="{% url 'login' %}">
        {% csrf_token %}
        {{ form |crispy }}

        <input type="submit" class="btn btn-primary" value="Login" />
        <input type="hidden" name="next" value="{{ next }}" />
      </form>
    </div>
  </div>
  <div class="right">
    <p>
      This app is intended for automotive industry development service providers, often dealing with sensitive data. Therefore, for security reasons, all pages of this app can only be accessed with a username and password.
    </p>
    <p>
      If you don't have a username or password, please <b>contact me</b> and I will provide you with a <b>test user</b>, so that you can fully appreciate the functionality of this app.
    </p>
  
    {% if sent == 0 %}
      <form action="{% url 'project_view:get_in_touch' %}" method="post">
        <div class="upper_form">
          {% csrf_token %}
          {{ touch_form |crispy }}
        </div>
        <div class="lower_form">
          {% csrf_token %}
          {{ touch_form2 |crispy }}
        </div>
        
        <div class="button"><input type="submit" value="Send"></div>
      </form>
    {% else %}
    <div class="thank_you">
      
      <h4><i class="far fa-paper-plane" style="font-size: 30px;"></i> Thank you for your message, I will get back to you as soon as I can. Cheers! <i class="far fa-paper-plane" style="font-size: 30px;"></i></h4>
    </div>
    {% endif %}
  </div>
</div>

    <h2>About the app:</h2>

    <ul>
      <li>purpose of this app</li>
      <li>functionality</li>
      <li>cool features</li>
      <li>gallery</li>
    </ul>
  
<script>
  var myUrl = '{% url 'project_view:unsent' %}'
  
  window.onload = function unsentPost(){

    const csrftoken = getCookie('csrftoken');
    const request = new Request (myUrl);
    /*send the data using fetch method:*/
    fetch(request, {
        method: "post",
        mode: 'same-origin',
        headers: {'X-CSRFToken': csrftoken}
    }).then(function(data){
        console.log(data)
    }).catch(console.log(myUrl, 'error'));
}
</script>

{% endblock %}
